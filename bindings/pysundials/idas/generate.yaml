# -----------------------------------------------------------------
# Programmer(s): Cody J. Balos @ LLNL
# -----------------------------------------------------------------
# SUNDIALS Copyright Start
# Copyright (c) 2002-2025, Lawrence Livermore National Security
# and Southern Methodist University.
# All rights reserved.
#
# See the top-level LICENSE and NOTICE files for details.
#
# SPDX-License-Identifier: BSD-3-Clause
# SUNDIALS Copyright End
# -----------------------------------------------------------------
# This YAML file is used to instruct the generate.py script on
# how to generate some of the nanobind code needed for the
# IDAS module of pysundials.
# -----------------------------------------------------------------

modules:
  all:
    fn_exclude_by_name__regex:
    - "Free" # Free and destroy functions should not need to be called as all objects on the Python side are RAII ClassView objects
    - "Destroy"
    - "Space" # Space functions are deprecated, so dont expose them in Python
    # TODO(CJB): support SetOptions
    # Due to the need to convert between sys.argv and C argv, we need to do custom wrappers of these
    - "SetOptions" 
    macro_define_include_by_name__regex:
    - "^SUN_"
    - "^IDA_"
    - "^IDALS_"
  idas:
    path: idas/idas_generated.hpp
    headers:
    - ../../include/idas/idas.h
    - ../../include/idas/idas_ls.h
    # this option describes the functions which have optional pointer arguments,
    # i.e., one where you could provide NULL
    fn_params_optional_with_default_null:
      "SetLinearSolver":
      - "A" 
    fn_exclude_by_name__regex:
    # we use user_data for sneaking in python contexts, users can instead capture their states in a class
    - "^IDAGetUserData$" 
    - "^IDASetUserData$" 
    - "^IDAGetUserDataB$" 
    - "^IDASetUserDataB$"
    # this function should be deprecated, so we don't interface it
    - "^IDASetMonitorFn$"
    # generator cannot handle setting of function pointers, so we do something custom
    - "IDAInit.*"
    - "^IDASensInit$"
    - "^IDASensInit1$"
    - "IDAQuadInit.*"
    - "IDAQuadSensInit.*"
    - "IDASet.*Fn" 
    - "IDASet.*Preconditioner"
    - "IDASetJacTimes.*"
    # TODO(CJB): add support for these functions
    #  ** parameters are not yet supported by litgen
    - "^IDAComputeStateSens$"
    - "^IDAComputeStateSens1$"
    - "^IDAGetCurrentYSens$"
    - "^IDAGetCurrentYpSens$"
    - "^IDAGetNonlinearSystemDataSens$"
