# -----------------------------------------------------------------
# Programmer(s): Cody J. Balos @ LLNL
# -----------------------------------------------------------------
# SUNDIALS Copyright Start
# Copyright (c) 2002-2025, Lawrence Livermore National Security
# and Southern Methodist University.
# All rights reserved.
#
# See the top-level LICENSE and NOTICE files for details.
#
# SPDX-License-Identifier: BSD-3-Clause
# SUNDIALS Copyright End
# -----------------------------------------------------------------
# This YAML file is used to instruct the generate.py script on
# how to generate some of the nanobind code needed for the
# core module of pysundials.
# -----------------------------------------------------------------

modules:
  all:
    fn_exclude_by_name__regex:
    - "Free" # Free and destroy functions should not need to be called as all objects on the Python side are RAII ClassView objects
    - "Destroy"
    - "NewEmpty" # No need to call NewEmpty functions in Python
    - "CopyOps" # No need to call CopyOps functions in Python
    - "Space" # Space functions are deprecated, so dont expose them in Python
    macro_define_include_by_name__regex:
    - "^SUN_"
  sundials_adaptcontroller:
    path: sundials/pysundials_adaptcontroller_generated.hpp
    headers:
    - ../../include/sundials/sundials_adaptcontroller.h
  sundials_adjointcheckpointscheme:
    path: sundials/pysundials_adjointcheckpointscheme_generated.hpp
    headers:
    - ../../include/sundials/sundials_adjointcheckpointscheme.h
    fn_exclude_by_name__regex:
    - "Create" # nanobind cannot bind to functions which take a **
    - "Set.*Fn" # nanobind cannot bind to functions which take a function pointer
    - "SetContent" # no need to set content from Python
    - "GetContent" # nanobind cannot bind to functions which take a **
    - "LoadVector" # nanobind cannot bind to functions which take a **
    - "InsertVector" # should not need to insert a checkpoint from Python
  sundials_adjointstepper:
    path: sundials/pysundials_adjointstepper_generated.hpp
    headers:
    - ../../include/sundials/sundials_adjointstepper.h
    fn_exclude_by_name__regex:
    - "Create" # nanobind cannot bind to functions which take a **
  sundials_context:
    path: sundials/pysundials_context_generated.hpp
    headers:
    - ../../include/sundials/sundials_context.h
    fn_exclude_by_name__regex:
    - "Create" # nanobind cannot bind to functions which take a **
    - "GetProfiler" # nanobind cannot bind to functions which take a **
    - "GetLogger" # nanobind cannot bind to functions which take a **
  sundials_errors:
    path: sundials/pysundials_errors_generated.hpp
    headers:
    - ../../include/sundials/sundials_errors.h
    enum_exclude_by_name__regex:
    - "SUNErrCode_" # not needed in Python
  sundials_linearsolver:
    path: sundials/pysundials_linearsolver_generated.hpp
    headers:
    - ../../include/sundials/sundials_iterative.h
    - ../../include/sundials/sundials_linearsolver.h
    fn_exclude_by_name__regex:
    - "SUNQRAdd" # nanobind cannot bind to functions which take a **
  sundials_logger:
    path: sundials/pysundials_logger_generated.hpp
    headers:
    - ../../include/sundials/sundials_logger.h
    fn_exclude_by_name__regex:
    - "Create" # nanobind cannot bind to functions which take a **
  sundials_matrix:
    path: sundials/pysundials_matrix_generated.hpp
    headers:
    - ../../include/sundials/sundials_matrix.h
  sundials_memory:
    path: sundials/pysundials_memory_generated.hpp
    headers:
    - ../../include/sundials/sundials_memory.h
    fn_exclude_by_name__regex:
    - "Alias" # not needed in Python
    - "Wrap" # not needed in Python
    - "Alloc*" # nanobind cannot bind to functions which take a **
    - "Dealloc" # not needed in Python
    - "Copy*" # not needed in Python
    class_exclude_by_name__regex:
    - "SUNMemory_" # not needed in Python
  sundials_nonlinearsolver:
    path: sundials/pysundials_nonlinearsolver_generated.hpp
    headers:
    - ../../include/sundials/sundials_nonlinearsolver.h
  sundials_nvector:
    path: sundials/pysundials_nvector_generated.hpp
    headers:
    - ../../include/sundials/sundials_nvector.h
    fn_exclude_by_name__regex:
    - "ArrayPointer"
    - "BufPack"
    - "BufUnpack"
    - "VectorArray"
    - "Multi"
    - "LinearCombination"
  sundials_profiler:
    path: sundials/pysundials_profiler_generated.hpp
    headers:
    - ../../include/sundials/sundials_profiler.h
    fn_exclude_by_name__regex:
    - "Create"
  sundials_stepper:
    path: sundials/pysundials_stepper_generated.hpp
    headers:
    - ../../include/sundials/sundials_stepper.h
    fn_exclude_by_name__regex:
    - "Create" # nanobind cannot bind to functions which take a **
    - "Set.*Fn" # nanobind cannot bind to functions which take a function pointer
    - "SetForcing" # nanobind cannot bind to functions which take a **
    - "SetContent" # no need to set content from Python
    - "GetContent" # nanobind cannot bind to functions which take a **
  sundials_types:
    path: sundials/pysundials_types_generated.hpp
    headers:
    - ../../include/sundials/sundials_types.h
