# -----------------------------------------------------------------
# Programmer(s): Cody J. Balos @ LLNL
# -----------------------------------------------------------------
# SUNDIALS Copyright Start
# Copyright (c) 2002-2025, Lawrence Livermore National Security
# and Southern Methodist University.
# All rights reserved.
#
# See the top-level LICENSE and NOTICE files for details.
#
# SPDX-License-Identifier: BSD-3-Clause
# SUNDIALS Copyright End
# -----------------------------------------------------------------
# This YAML file is used to instruct the generate.py script on
# how to generate some of the nanobind code needed for the
# ARKODE module of pysundials.
# -----------------------------------------------------------------

modules:
  all:
    fn_exclude_by_name__regex:
    - "Free" # Free and destroy functions should not need to be called as all objects on the Python side are RAII ClassView objects
    - "Destroy"
    - "Space" # Space functions are deprecated, so dont expose them in Python
    macro_define_include_by_name__regex:
    - "^SUN_"
    - "^ARK_"
  arkode:
    path: arkode/pysundials_arkode_generated.hpp
    headers:
    - ../../include/arkode/arkode.h
    - ../../include/arkode/arkode_ls.h
    fn_exclude_by_name__regex:
    # nanobind doesnt support **
    - "ARKodeCreateMRIStepInnerStepper" 
    - "ARKodeGetJac" 
    - "ARKodeGetCurrentState" 
    - "ARKodeGetCurrentMassMatrix"
    - "ARKodeCreateSUNStepper"
    # we use user_data for sneaking in python contexts, users can instead capture their states in a class
    - "ARKodeGetUserData" 
    - "ARKodeSetUserData" 
    # generator cannot handle setting of function pointers 
    - "ARKodeSetPostprocessStepFn" 
    - "ARKodeSetPostprocessStageFn" 
    - "ARKodeSetNlsRhsFn" 
    - "ARKodeSetStagePredictFn" 
    - "ARKodeSetStabilityFn" 
    - "ARKodeSetRelaxFn"
  erkstep:
    path: arkode/pysundials_arkode_erkstep_generated.hpp
    headers:
    - ../../include/arkode/arkode_erkstep.h
    fn_exclude_by_name__regex:
    # we dont bind the ERKStepCreate function as we need to do something custom
    - "Create"
    # nanobind doesnt support **
    - "ERKStepGetCurrentButcherTable"