#!/usr/bin/env groovy
pipeline {
    agent any

    stages {
        stage('Test') {
            matrix {
                axes {  
                    axis {
                        name 'REALTYPE'
                        values 'single', 'double', 'extended'
                    }
                    axis {
                        name 'INDEXSIZE'
                        values '32', '64'
                    }
                }

            }
            stages {
                stage('build-and-test') {
                    steps {
                        echo "Do test for ${REALTYPE} and ${INDEXSIZE}"
                    }
                }
            }
        }
    }
    // post {
    //      always {
    //              echo 'Tests Complete'
    //              archiveArtifacts artifacts: 'test/**/build_*/Testing/Temporary/LastTest.log'
    //      }
    //      success {
    //              sh("cd test && ./notify.py passed ${env.BRANCH_NAME} ${env.BUILD_URL}")
    //      }
    //      failure {
    //              sh("cd test && ./notify.py failed ${env.BRANCH_NAME} ${env.BUILD_URL}")
    //      }
    //      fixed {
    //              sh("cd test && ./notify.py fixed ${env.BRANCH_NAME} ${env.BUILD_URL}")
    //      }
    // }
}
